{"ast":null,"code":"var _jsxFileName = \"/Users/katallen/Documents/GitHub/AccessibleMakerspace/VirtualMakerSpace-main/src/Components/projCard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\n\n// Send the requested project's id to cloudinary to get cover photo \nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function sendImageRequest(id, e) {\n  try {\n    //Handle Success\n    const response = await axios.post('/api/data', {\n      id: id\n    });\n    return response.data;\n  } catch (error) {\n    // Handle error\n    console.error('Error submitting user info:', error);\n  }\n  console.log(\"Finished accessing information\");\n}\n;\nexport { sendImageRequest };\nconst ProjCard = ({\n  id,\n  info\n}) => {\n  _s();\n  const [coverImage, setCoverImg] = useState('');\n  const [userLoggedIn, setUserLoggedIn] = useState(false);\n  const [guest, setUserName] = useState('');\n  const [key, setKey] = useState('');\n\n  // TODO: toggle edit & delete buttons based on the logged in user \n  // async function checkUserID (guest) {\n  //   console.log(guest);\n  //   console.log(\"about to send server request: \", guest);\n  // //   const response = await axios.post('/api/getUserByName',{userName: guest}); //TODO: doesnt return the userID\n  // //   console.log(\"id returned: \", response.data);\n  // }\n\n  //on load, get user credentials & make image request\n  useEffect(() => {\n    setUserLoggedIn(sessionStorage.getItem('Status'));\n    setKey(sessionStorage.getItem('key'));\n    setUserName(sessionStorage.getItem('account'));\n\n    // checkUserID(guest);\n\n    //function that calls request for project images\n    const fetchData = async () => {\n      try {\n        console.log(`id:${id}`);\n        const imageUrl = await sendImageRequest(`id${id}`);\n        setCoverImg(imageUrl[0]);\n      } catch (error) {\n        console.error('Error fetching image URL:', error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  //user deleting a project using the Delete button \n  async function handleDelete(e) {\n    e.stopPropagation(); // Stops the loading of the project specific page \n    const idNumber = parseInt(id.replace(\"id\", \"\"));\n    try {\n      const response = await axios.post('/api/deleteProject', {\n        username: guest,\n        password: key,\n        projid: idNumber\n      });\n      if (response.data == false) {\n        alert(\"You cannot delete this project because you are not the creator.\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting project:\", error);\n    }\n  }\n  //function that opens the singleProj page when a projectCard is clicked & store the proj ID\n  const handleClick = event => {\n    const selectedProj = event.currentTarget.id;\n    console.log(\"Project Card Being called: \", event.currentTarget.id);\n    const projID = `id${selectedProj}`;\n    sendImageRequest(projID);\n    //store the project id while they are on this website \n    sessionStorage.setItem('projectId', projID);\n    window.location.href = \"/project\";\n  };\n\n  // user editing a project using the Edit button - opens the prefilled form \n  async function handleEdit(e) {\n    e.stopPropagation();\n    sessionStorage.setItem('Editing', true);\n    sessionStorage.setItem('EditingID', id);\n    setTimeout(() => {\n      window.location.href = \"/projectUpload\";\n    }, 0);\n  }\n\n  // on log out, cleans the sessionStorage \n  function handleLogOut() {\n    sessionStorage.clear();\n    window.location.href = \"/\";\n  }\n  return (\n    /*#__PURE__*/\n    // displays each card with the proper format \n    _jsxDEV(\"div\", {\n      className: \"projCard\",\n      id: id,\n      onClick: handleClick,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"innerBox\",\n        children: [userLoggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deleteLink\",\n            onClick: handleDelete,\n            children: \" Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"editLink\",\n            id: id,\n            onClick: handleEdit,\n            children: \" Edit \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: coverImage && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"thumbnail\",\n            src: coverImage,\n            alt: \"Project Thumbnail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\",\n            overflowWrap: \"normal\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\" \", info.title, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tags\",\n          children: [\" \", info.tags, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(ProjCard, \"8JkKC9lkcv2OaPKTIXmj7qQP9vM=\");\n_c = ProjCard;\nexport default ProjCard;\nvar _c;\n$RefreshReg$(_c, \"ProjCard\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","sendImageRequest","id","e","response","post","data","error","console","log","ProjCard","info","_s","coverImage","setCoverImg","userLoggedIn","setUserLoggedIn","guest","setUserName","key","setKey","sessionStorage","getItem","fetchData","imageUrl","handleDelete","stopPropagation","idNumber","parseInt","replace","username","password","projid","alert","handleClick","event","selectedProj","currentTarget","projID","setItem","window","location","href","handleEdit","setTimeout","handleLogOut","clear","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","textAlign","overflowWrap","title","tags","_c","$RefreshReg$"],"sources":["/Users/katallen/Documents/GitHub/AccessibleMakerspace/VirtualMakerSpace-main/src/Components/projCard.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport axios from 'axios';\n\n// Send the requested project's id to cloudinary to get cover photo \nasync function sendImageRequest (id, e) {\n  try { //Handle Success\n    const response = await axios.post('/api/data',{id: id});\n    return response.data;\n  } catch (error) { // Handle error\n    console.error('Error submitting user info:', error);\n  }\n  console.log(\"Finished accessing information\");\n};\nexport { sendImageRequest };\n\nconst ProjCard = ({ id , info }) => {\n  const [coverImage, setCoverImg] = useState('');\n  const [userLoggedIn, setUserLoggedIn] = useState(false); \n  const [guest, setUserName] = useState(''); \n  const [key, setKey] = useState(''); \n\n  // TODO: toggle edit & delete buttons based on the logged in user \n  // async function checkUserID (guest) {\n  //   console.log(guest);\n  //   console.log(\"about to send server request: \", guest);\n  // //   const response = await axios.post('/api/getUserByName',{userName: guest}); //TODO: doesnt return the userID\n  // //   console.log(\"id returned: \", response.data);\n  // }\n  \n  //on load, get user credentials & make image request\n  useEffect(() => { \n    setUserLoggedIn(sessionStorage.getItem('Status'));\n    setKey(sessionStorage.getItem('key'));\n    setUserName(sessionStorage.getItem('account'));\n\n    // checkUserID(guest);\n\n    //function that calls request for project images\n    const fetchData = async () => {\n      try {\n        console.log(`id:${id}`);\n        const imageUrl = await sendImageRequest(`id${id}`);\n        setCoverImg(imageUrl[0]);\n      } catch (error) {\n        console.error('Error fetching image URL:', error);\n      }\n    };\n    fetchData();\n  },[]);\n\n  //user deleting a project using the Delete button \n  async function handleDelete(e){\n    e.stopPropagation(); // Stops the loading of the project specific page \n    const idNumber = parseInt(id.replace(\"id\", \"\"));\n    try{\n      const response = await axios.post('/api/deleteProject', {username: guest, password: key, projid: idNumber});\n      if(response.data == false){\n        alert(\"You cannot delete this project because you are not the creator.\");\n      }\n    }catch (error) {\n      console.error(\"Error deleting project:\", error);\n    }\n  }\n  //function that opens the singleProj page when a projectCard is clicked & store the proj ID\n  const handleClick = (event) => {\n    const selectedProj = event.currentTarget.id;\n    console.log(\"Project Card Being called: \",event.currentTarget.id);\n    const projID = `id${selectedProj}`;\n    sendImageRequest(projID);\n    //store the project id while they are on this website \n    sessionStorage.setItem('projectId', projID); \n    window.location.href = \"/project\";\n  };\n\n  // user editing a project using the Edit button - opens the prefilled form \n  async function handleEdit(e){\n    e.stopPropagation();\n    sessionStorage.setItem('Editing', true); \n    sessionStorage.setItem('EditingID', id);\n    setTimeout(() => {\n      window.location.href = \"/projectUpload\";\n    }, 0);\n  }\n\n  // on log out, cleans the sessionStorage \n  function handleLogOut(){\n    sessionStorage.clear();\n    window.location.href = \"/\";\n  }\n\n  return(\n    // displays each card with the proper format \n    <div className=\"projCard\" id={id} onClick={handleClick}> \n      <div className=\"innerBox\">\n        {userLoggedIn ? (\n          <div className=\"controls\"> \n            <button className=\"deleteLink\" onClick={handleDelete} > Delete </button>\n            <button className=\"editLink\" id={id} onClick={handleEdit}> Edit </button>\n          </div>\n        ) : null}\n\n        <div>\n          {coverImage && <img className=\"thumbnail\" src={coverImage} alt=\"Project Thumbnail\" />}\n        </div>\n       \n        <div style={{textAlign:\"center\", overflowWrap:\"normal\"}}> \n          <h2> {info.title} </h2> \n        </div>\n\n        <div className=\"tags\"> {info.tags} </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProjCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}